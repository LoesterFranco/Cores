# via6522
(C) Robert Finch

## Overview
The via6522 is a versatile interface adapter 32-bit peripheral core that is register compatible with a 6522. The low order eight bits of a register mirror the 6522 function.
## Features
* 2 32-bit ports
* 3 64-bit timers
* 1 32-bit shift register
## Registers
|Reg |Bits|Moniker| Description            | Comment        |
|----|----|-------|------------------------|----------------|
| 00 | 32 |  PB   | Port B I/O             |                |
| 04 | 32 |  PA   | Port A I/O             | handshaking    |
| 08 | 32 | PBDDR | Port B data direction  |                |
| 0C | 32 | PADDR | Port A data direction  |                |
| 10 | 32 | T1CL  | Time 1/3 count low     |                |
| 14 | 32 | T1CH  | Time 1/3 count high    |                |
| 18 | 32 | T1LL  | Time 1/3 latch low     |                |
| 1C | 32 | T1LH  | Time 1/3 latch high    |                |
| 20 | 32 | T2CL  | Time 2 count low       |                |
| 24 | 32 | T2CH  | Time 2 count high      |                |
| 28 | 32 |  SR   | Shift register         |                |
| 2C | 16 | ACR   | Auxillary control reg  |                |
| 30 | 16 | PCR   | Peripheral control reg |                |
| 34 | 16 | IFR   | Interrupt flag reg     |                |
| 38 | 32 | IER   | Interrupt enable reg   |                |
| 3C | 32 |  PA   | Port A I/O             | no-handshaking |

### PB (Reg 00)
Operates in the same manner as the 6522 port B but is 32-bits wide rather than 8-bits. If port B input latching is enabled, then input data on port B is latched by an active transition of the selected handshaking signal. Otherwise input data is reflected directly by reading the port register.
### PA (Reg 04)
Operates in the same manner as the 6522 port A but is 32-bits wide rather than 8-bits. If port A input latching is enabled, then input data on port A is latched by an active transition of the selected handshaking signal. Otherwise input data is reflected directly by reading the port register.
### PBDDR (Reg 08)
Operates in the same manner as the 6522 port B ddr but is 32-bits wide rather than 8-bits. Each bit that is set in this register set the corresponding port B I/O to an output. Each bit that is clear in this register sets the port B I/O to an input. The default value in this register at reset is zero, making all port B I/O’s inputs.
### PADDR (Reg 0C)
Operates in the same manner as the 6522 port A ddr but is 32-bits wide rather than 8-bits. Each bit that is set in this register set the corresponding port A I/O to an output. Each bit that is clear in this register sets the port A I/O to an input. The default value in this register at reset is zero, making all port A I/O’s inputs.
### T1CL (Reg 10)
Similar function to the reg 4 of the 6522. Provides read access to the low order 32-bits of timer 1. Acts as a latch for the low 32-bits of the value to be loaded into the timer. Byte lane selects allow loading of only the byte that needs to be modified.
This register also provides access to timer 3 if the timer 3 access bit is set in the peripheral control register.
### T1CH (Reg 14)
Similar in function to register 5 of the 6522. When the timer is in 16-bit mode writing this register transfers bit 0 to 7 of the timer 1 latch to bits 0 to 7 of the timer and transfers input data bits 0 to 7 to counter bits 8 to 15 of the timer. Timer counter bits 16 to 63 are set to zero.
When the timer is in 64-bit mode writing this register transfers the low order latch to bits 0 to 31 of the counter, and bits 32 to 63 of the counter are loaded with the input data value.
This register also provides access to timer 3 high order bits if the timer 3 access bit is set in the peripheral control register.



